syntax = "proto3";
package history;
import "github.com/cardsGame/qpProto/friendRoom/friendRoom.proto";

service History {
    // 获取用户的战绩
    rpc GetUserHistory(GetUserHistoryRequest) returns (GetUserHistoryResponse) {}

    // 获取亲友圈的战绩
    rpc GetCircleHistory(GetCircleHistoryRequest) returns (GetCircleHistoryResponse) {}

    // 存储数据 服务端调用
    rpc StoreHistory (StoreHistoryRequest) returns (StoreHistoryResponse) {}

    // 增加索引 服务端调用
    rpc AddIndex(AddIndexReqeust) returns (AddIndexResponse) {}
}

enum HistoryType {
    friend_room = 0;
}

// 获取用户战绩请求
message GetUserHistoryRequest {
    int32 page = 1;
    int32 limit = 2;
    HistoryType t = 3;
}

// 获取用户战绩响应
message GetUserHistoryResponse {
    oneof rooms {
        friendRoom.RoomData friendRooms  = 1;
    }
}

message GetCircleHistoryRequest {
    int32 page = 1;
    int32 limit = 2;
    HistoryType t = 3;
}

message GetCircleHistoryResponse {

}

// 写入战绩请求
message StoreHistoryRequest {
    oneof roomData {
        friendRoom.RoomData friendRoomData  = 1;
    }
}

// 写入战绩响应
message StoreHistoryResponse {
    string historyId = 1; // 战绩id
    HistoryType t = 2; // 类型
}

// 增加索引请求
message AddIndexReqeust {
    string key = 1;
    string historyId = 2; // 战绩id
    HistoryType t = 3; // 类型
}

// 增加索引响应
message AddIndexResponse {}